System.register(["./chakra-legacy-kLWqSh8h.js","./index-legacy-jPnNF4Mh.js","./react-legacy-s9Sa69l0.js","./app-router-legacy-IVYA5ybh.js","./ag-grid-legacy-Zvw_qBz8.js","./param-manager-utils-legacy-xEKYKNFP.js"],(function(e,a){"use strict";var n,r,l,t,i,o,s,d,u,c,m,p,g,h,f,x,v,b,R,j;return{setters:[e=>{n=e.$,r=e.u,l=e.j,t=e.O,i=e.e,o=e.a7},e=>{s=e.b,d=e.c,u=e.u,c=e.e,m=e.b7,p=e.i,g=e.ar,h=e.aq,f=e.as,x=e.b8},e=>{v=e.r},e=>{b=e.R,R=e.g},e=>{j=e.m},null],execute:function(){e("default",(function(e){const{branchIndex:n}=e,{t:r,i18n:t}=s(),i=d(),S=u((e=>e.app.sidePanelMode)),{style:y,theme:w,stn_list:C,line_num:G,coline:A}=u((e=>e.param)),M=u((e=>e.helper.branches))[n].filter((e=>!["linestart","lineend"].includes(e))),T=v.useMemo((()=>[{headerName:r("StationAgGrid.num"),field:"num",cellRenderer:({value:e})=>l.jsx(N,{lineNumber:G,stationNumber:e,lineColour:w[2]}),pinned:"left",minWidth:110,hide:![c.GZMTR].includes(y)},{headerName:r("Chinese name"),field:"name",valueFormatter:({value:e,data:a})=>e[0]+(y===c.GZMTR&&null!=a&&a.secondaryName&&null!=a&&a.secondaryName[0]?` (${a.secondaryName[0]})`:"")},{headerName:r("English name"),field:"name",cellRenderer:({value:e,data:a})=>l.jsx(b,{text:e[1]+(y===c.GZMTR&&a.secondaryName&&a.secondaryName[1]?` (${a.secondaryName[1]})`:"")}),minWidth:300},{headerName:r("StationAgGrid.interchange"),field:"transfer",cellRenderer:({value:e})=>l.jsx(o,{children:e.groups.map((e=>{var a;return null!==(a=e.lines)&&void 0!==a?a:[]})).flat().map(((e,a)=>{var n,r,t,i;return l.jsx(m,{name:e.name,bg:null!==(n=null===(r=e.theme)||void 0===r?void 0:r[2])&&void 0!==n?n:"#aaaaaa",fg:null!==(t=null===(i=e.theme)||void 0===i?void 0:i[3])&&void 0!==t?t:p.white,showShortName:!0},a)}))})},{headerName:r("StationAgGrid.coline"),field:"rowSpan",rowSpan:({data:e})=>{var a;return null!==(a=null==e?void 0:e.rowSpan[0])&&void 0!==a?a:0},cellClassRules:{"rmg-ag-grid--spanned-cell":({value:e})=>e[0]>0},cellRenderer:({value:e})=>{var a;return l.jsx(o,{children:null===(a=A[e[1]])||void 0===a||null===(a=a.colors)||void 0===a?void 0:a.map(((e,a)=>l.jsx(m,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},a)))})},hide:![c.SHMetro].includes(y)}]),[y,w.toString(),t.language]),k=v.useRef(null),I=v.useRef(!1);v.useEffect((()=>{I.current&&k.current&&1===k.current.api.getSelectedRows().length&&S!==g.STATION&&k.current.api.deselectAll()}),[I.current,S]);const D=M.map((e=>({...C[e],id:e,rowSpan:i(R(e,n))}))),H=v.useCallback((()=>{I.current=!0}),[I.current]),O=v.useCallback((({api:e})=>{var a;const n=null===(a=e.getSelectedRows())||void 0===a?void 0:a.map((e=>e.id));console.log("StationAgGrid.handleSelectionChanged():: Row selection changed",n),null!=n&&n.length&&(i(h(g.STATION)),i(f(n[0])),i(x(void 0)))}),[]),W=v.useCallback((({data:e})=>e.id),[]);return l.jsx(a,{children:l.jsx(j.AgGridReact,{ref:k,rowData:D,defaultColDef:{resizable:!0},columnDefs:T,getRowId:W,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressMovableColumns:!0,suppressRowTransform:!0,rowSelection:"single",onSelectionChanged:O,onGridReady:H,debug:!1})})}));var a=function(e){var a=e.children,i=n().colorMode,o=r("RmgAgGrid");return l.jsx(t,{className:"light"===i?"ag-theme-alpine":"ag-theme-alpine-dark",sx:o,children:a})};function N(e){const{lineNumber:a,stationNumber:n,lineColour:r}=e,t={h:"24px",position:"relative",color:"black","&::before":{content:"''",w:"calc(100% + 2px)",h:"26px",position:"absolute",top:"-1px",left:"-1px",bg:"white",borderRadius:"13px"},span:{display:"flex",justifyContent:"center",alignItems:"center",padding:"3px",minWidth:"24px",border:"2px solid",borderColor:r,zIndex:1,"&:first-of-type":{borderRadius:"12px 0 0 12px"},"&:last-of-type":{borderRadius:"0 12px 12px 0",marginLeft:"-2px"}}};return l.jsxs(i,{sx:t,children:[l.jsx("span",{children:a}),l.jsx("span",{children:n})]})}}}}));
